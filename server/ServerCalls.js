/// <reference path="../both/TimeMachine.ts"/>
console.log("ServerCall.ts is loading");
Meteor.startup(function () {
    console.log("ServerCall.ts startup is running");
    if (Meteor.isServer) {
        Meteor.methods({
            getListForTarget: function (theObject) {
                var factoryObject = Factory.CreateProxyInstance(theObject.classType);
                //       factoryObject.getRelatedObject(theObject);
            },
            cleanDB: function () {
                var timeM = new TimeMachineClass();
                timeM.cleanDBServer();
            },
            createAssessmentDetails: function (scenario, domain) {
                AppLog.info("inside meteor methods calling createAssessmentDetail");
                // var theTree = AssessementClass.createAssessmentDetailsServer(scenario,domain)
                // return theTree;
            },
            removeObject: function (theObject) {
                var factoryObject = Factory.CreateProxyInstance(theObject.classType);
                factoryObject.removeServer(theObject);
            },
            removeMapReference: function (theObject) {
                var factoryObject = Factory.CreateProxyInstance(ClassType.MAP);
                factoryObject.removeReferenceServer(theObject.id1, theObject.id2);
            },
            capabilitySafeRemoval: function (treeNode) {
                var factoryObject = Factory.CreateProxyInstanceTree("capability");
                factoryObject.removeServer(treeNode);
            },
            capabilityRemoveSet: function (theList, domain) {
                var factoryObject = Factory.CreateProxyInstanceTree("capability");
                factoryObject.removeSet(theList);
            },
            dimensionSafeRemoval: function (treeNode) {
                var factoryObject = Factory.CreateProxyInstanceTree("dimension");
                factoryObject.removeServer(treeNode);
            },
            removeMap: function (id) {
                var mapObject = Factory.CreateProxyInstance(ClassType.MAP);
                mapObject.removeReferenceServer(id, null);
                ;
            },
            updateTechAssessment: function (theID, techValue) {
                try {
                }
                catch (e) {
                    AppLog.error("Error Updating Assessment", e);
                }
            },
            createTransitions: function (domain) {
                //TransitionClass.createTransitionsServer(domain);
            },
        });
        var Fiber = Npm.require('fibers');
        process.on('uncaughtException', function (err) {
            AppLog.error(err.message, err);
            Fiber(function () {
                //      Logs.insert({ ... }) // Logs is a collection
            }).run();
            process.exit(1);
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2VydmVyQ2FsbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJTZXJ2ZXJDYWxscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSw4Q0FBOEM7QUFJOUMsT0FBTyxDQUFDLEdBQUcsQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0FBRXhDLE1BQU0sQ0FBQyxPQUFPLENBQUM7SUFDWCxPQUFPLENBQUMsR0FBRyxDQUFDLGtDQUFrQyxDQUFDLENBQUM7SUFFaEQsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7UUFFbEIsTUFBTSxDQUFDLE9BQU8sQ0FBQztZQUVYLGdCQUFnQixFQUFFLFVBQVUsU0FBYTtnQkFFckMsSUFBSSxhQUFhLEdBQVUsT0FBTyxDQUFDLG1CQUFtQixDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQztnQkFFNUUsbURBQW1EO1lBQ3ZELENBQUM7WUFFYyxPQUFPLEVBQUU7Z0JBQ0wsSUFBSSxLQUFLLEdBQUcsSUFBSSxnQkFBZ0IsRUFBRSxDQUFDO2dCQUVuQyxLQUFLLENBQUMsYUFBYSxFQUFFLENBQUM7WUFDMUIsQ0FBQztZQUVELHVCQUF1QixFQUFFLFVBQVUsUUFBWSxFQUFFLE1BQVU7Z0JBQ3ZELE1BQU0sQ0FBQyxJQUFJLENBQUMsc0RBQXNELENBQUMsQ0FBQztnQkFDcEUsZ0ZBQWdGO2dCQUNoRixrQkFBa0I7WUFFdEIsQ0FBQztZQUVELFlBQVksRUFBRSxVQUFVLFNBQVM7Z0JBRTdCLElBQUksYUFBYSxHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUM7Z0JBRXJFLGFBQWEsQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDMUMsQ0FBQztZQUVELGtCQUFrQixFQUFFLFVBQVUsU0FBUztnQkFFbkMsSUFBSSxhQUFhLEdBQVUsT0FBTyxDQUFDLG1CQUFtQixDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFFdEUsYUFBYSxDQUFDLHFCQUFxQixDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBRXRFLENBQUM7WUFFRCxxQkFBcUIsRUFBRSxVQUFVLFFBQVE7Z0JBQ3JDLElBQUksYUFBYSxHQUFHLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxZQUFZLENBQUMsQ0FBQztnQkFFbEUsYUFBYSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUV6QyxDQUFDO1lBRUQsbUJBQW1CLEVBQUUsVUFBVSxPQUFPLEVBQUUsTUFBTTtnQkFFMUMsSUFBSSxhQUFhLEdBQUcsT0FBTyxDQUFDLHVCQUF1QixDQUFDLFlBQVksQ0FBQyxDQUFDO2dCQUVsRSxhQUFhLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBRXJDLENBQUM7WUFFRCxvQkFBb0IsRUFBRSxVQUFVLFFBQVE7Z0JBQ3BDLElBQUksYUFBYSxHQUFHLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxXQUFXLENBQUMsQ0FBQztnQkFFakUsYUFBYSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUN6QyxDQUFDO1lBRUQsU0FBUyxFQUFFLFVBQVUsRUFBRTtnQkFDbkIsSUFBSSxTQUFTLEdBQVUsT0FBTyxDQUFDLG1CQUFtQixDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFFbEUsU0FBUyxDQUFDLHFCQUFxQixDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztnQkFDMUMsQ0FBQztZQUNMLENBQUM7WUFFRCxvQkFBb0IsRUFBRSxVQUFVLEtBQUssRUFBRSxTQUFTO2dCQUU1QyxJQUFJLENBQUM7Z0JBTUwsQ0FBRTtnQkFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNULE1BQU0sQ0FBQyxLQUFLLENBQUMsMkJBQTJCLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQ2pELENBQUM7WUFFTCxDQUFDO1lBRUQsaUJBQWlCLEVBQUUsVUFBVSxNQUFVO2dCQUVuQyxrREFBa0Q7WUFFdEQsQ0FBQztTQUlKLENBQUMsQ0FBQztRQUVsQixJQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ2xDLE9BQU8sQ0FBQyxFQUFFLENBQUMsbUJBQW1CLEVBQUUsVUFBVSxHQUFHO1lBQ3pDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQztZQUMvQixLQUFLLENBQUM7Z0JBQ0Ysb0RBQW9EO1lBQ3hELENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO1lBQ1QsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUNuQixDQUFDLENBQUMsQ0FBQztJQUVQLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9ib3RoL1RpbWVNYWNoaW5lLnRzXCIvPlxyXG5cclxuZGVjbGFyZSB2YXIgVGFza0RlcGVuZGVuY3k6TW9uZ28uQ29sbGVjdGlvbjxhbnk+O1xyXG5cclxuY29uc29sZS5sb2coXCJTZXJ2ZXJDYWxsLnRzIGlzIGxvYWRpbmdcIik7XHJcblxyXG5NZXRlb3Iuc3RhcnR1cChmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcIlNlcnZlckNhbGwudHMgc3RhcnR1cCBpcyBydW5uaW5nXCIpO1xyXG5cclxuICAgIGlmIChNZXRlb3IuaXNTZXJ2ZXIpIHtcclxuXHJcbiAgICAgICAgTWV0ZW9yLm1ldGhvZHMoe1xyXG5cclxuICAgICAgICAgICAgZ2V0TGlzdEZvclRhcmdldDogZnVuY3Rpb24gKHRoZU9iamVjdDphbnkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZmFjdG9yeU9iamVjdCA9IDxNYXBzPiBGYWN0b3J5LkNyZWF0ZVByb3h5SW5zdGFuY2UodGhlT2JqZWN0LmNsYXNzVHlwZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgZmFjdG9yeU9iamVjdC5nZXRSZWxhdGVkT2JqZWN0KHRoZU9iamVjdCk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhbkRCOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGltZU0gPSBuZXcgVGltZU1hY2hpbmVDbGFzcygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVNLmNsZWFuREJTZXJ2ZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUFzc2Vzc21lbnREZXRhaWxzOiBmdW5jdGlvbiAoc2NlbmFyaW86YW55LCBkb21haW46YW55KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBcHBMb2cuaW5mbyhcImluc2lkZSBtZXRlb3IgbWV0aG9kcyBjYWxsaW5nIGNyZWF0ZUFzc2Vzc21lbnREZXRhaWxcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgdGhlVHJlZSA9IEFzc2Vzc2VtZW50Q2xhc3MuY3JlYXRlQXNzZXNzbWVudERldGFpbHNTZXJ2ZXIoc2NlbmFyaW8sZG9tYWluKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIHRoZVRyZWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlT2JqZWN0OiBmdW5jdGlvbiAodGhlT2JqZWN0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZhY3RvcnlPYmplY3QgPSBGYWN0b3J5LkNyZWF0ZVByb3h5SW5zdGFuY2UodGhlT2JqZWN0LmNsYXNzVHlwZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFjdG9yeU9iamVjdC5yZW1vdmVTZXJ2ZXIodGhlT2JqZWN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZU1hcFJlZmVyZW5jZTogZnVuY3Rpb24gKHRoZU9iamVjdCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmYWN0b3J5T2JqZWN0ID0gPE1hcHM+IEZhY3RvcnkuQ3JlYXRlUHJveHlJbnN0YW5jZShDbGFzc1R5cGUuTUFQKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWN0b3J5T2JqZWN0LnJlbW92ZVJlZmVyZW5jZVNlcnZlcih0aGVPYmplY3QuaWQxLCB0aGVPYmplY3QuaWQyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBjYXBhYmlsaXR5U2FmZVJlbW92YWw6IGZ1bmN0aW9uICh0cmVlTm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZhY3RvcnlPYmplY3QgPSBGYWN0b3J5LkNyZWF0ZVByb3h5SW5zdGFuY2VUcmVlKFwiY2FwYWJpbGl0eVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWN0b3J5T2JqZWN0LnJlbW92ZVNlcnZlcih0cmVlTm9kZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwYWJpbGl0eVJlbW92ZVNldDogZnVuY3Rpb24gKHRoZUxpc3QsIGRvbWFpbikge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmYWN0b3J5T2JqZWN0ID0gRmFjdG9yeS5DcmVhdGVQcm94eUluc3RhbmNlVHJlZShcImNhcGFiaWxpdHlcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFjdG9yeU9iamVjdC5yZW1vdmVTZXQodGhlTGlzdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgZGltZW5zaW9uU2FmZVJlbW92YWw6IGZ1bmN0aW9uICh0cmVlTm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZhY3RvcnlPYmplY3QgPSBGYWN0b3J5LkNyZWF0ZVByb3h5SW5zdGFuY2VUcmVlKFwiZGltZW5zaW9uXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhY3RvcnlPYmplY3QucmVtb3ZlU2VydmVyKHRyZWVOb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZU1hcDogZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWFwT2JqZWN0ID0gPE1hcHM+IEZhY3RvcnkuQ3JlYXRlUHJveHlJbnN0YW5jZShDbGFzc1R5cGUuTUFQKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBPYmplY3QucmVtb3ZlUmVmZXJlbmNlU2VydmVyKGlkLCBudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVRlY2hBc3Nlc3NtZW50OiBmdW5jdGlvbiAodGhlSUQsIHRlY2hWYWx1ZSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogIEFzc2Vzc21lbnQudXBkYXRlKFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQgICB0aGVJRCwgeyRzZXQ6IHt0ZWNobm9sb2d5OiB0ZWNoVmFsdWV9fSxcclxuXHRcdFx0XHRcdFx0XHRcdFx0ICAgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRDNGxvZy5pbmZvKCBcIlVwZGF0ZVRlY2ggQXNlc3NtZW50XCIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTsgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBcHBMb2cuZXJyb3IoXCJFcnJvciBVcGRhdGluZyBBc3Nlc3NtZW50XCIsIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZVRyYW5zaXRpb25zOiBmdW5jdGlvbiAoZG9tYWluOmFueSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vVHJhbnNpdGlvbkNsYXNzLmNyZWF0ZVRyYW5zaXRpb25zU2VydmVyKGRvbWFpbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgRmliZXIgPSBOcG0ucmVxdWlyZSgnZmliZXJzJyk7XHJcbiAgICAgICAgcHJvY2Vzcy5vbigndW5jYXVnaHRFeGNlcHRpb24nLCBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgIEFwcExvZy5lcnJvcihlcnIubWVzc2FnZSwgZXJyKTtcclxuICAgICAgICAgICAgRmliZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICBMb2dzLmluc2VydCh7IC4uLiB9KSAvLyBMb2dzIGlzIGEgY29sbGVjdGlvblxyXG4gICAgICAgICAgICB9KS5ydW4oKTtcclxuICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG59KTtcclxuIl19